# day04

## 组件化编码流程（开发代码套路）

1. 拆分组件

- 根据用户页面功能或者变化来拆分组件

  - 用户页面功能：JS 交互功能
  - 用户页面变化：用户界面更新变化

- App
  - AddComment
  - CommentList
    - CommnetItem

2. 实现静态组件

- 实现前面拆分组件的静态结构和样式，JS 功能先不写

- 忽略结构样式，去课件 Vue 全家桶\代码\静态页面\comment_page

3. 实现动态组件

- 初始化 data 数据的问题

  - 要不要定义 data 数据？页面有没有变化/更新
  - 数据类型：[{id: 1, name: 'xx', content: 'xxx'}]
  - 数据名称：comments / commentList
  - 数据保存在哪个组件? App
    - 如果数据只有一个组件使用，就定义在这个组件内容
    - 如果数据由多个组件使用，就定义在多个组件的公共父组件中

- 完成功能
  - 实现初始化数据显示
  - 实现 JS 交互功能（添加数据/更新数据/删除数据...）

- 父组件如何向子组件传递数据
  - props（标签属性）：通过标签属性方式传递数据
    - 特点：props是父组件传递数据给子组件，子组件只能读取使用，不应该直接修改
  - 父组件定义data数据 `{comments: [{}, {}]}`
  - 父组件给子组件指定标签属性：`<CommentList :comments="comments" />`
  - 子组件声明接受标签属性（声明接受之后，子组件实例对象就直接拥有这个属性）
  - 子组件声明接受标签属性方式：
    - 数组形式
      props: ['prop1', 'prop2']
    - 对象形式
      props: {
        prop1: Object,
        prop2: Array,
      }

      props: {
        prop1: {
          type: Number,  // 类型是Number
          default: 0, // 默认值为 0
          required: true, // 必须要传的属性（必要的）
          validator: function (value) { // 校验函数
            return value >= 0 // 值必须大于0
          }
        }
      }

- 组件关于数据的2个重要问题
  - 数据定义在哪个组件
    - 如果数据只有一个组件使用，就定义在这个组件内容
    - 如果数据由多个组件使用，就定义在多个组件的公共父组件中
  - 更新数据的方法定义在哪个组件？
    - 数据源在哪里，更新数据方法就定义在哪

- 父组件给子组件传递数据
  - 函数
    - 例子：addComment/Function delComment/Function
    - 作用：子组件调用函数修改父组件数据（子组件传递数据给父组件  子 --> 父）
  - 非函数
    - 例子：comments/Array comment/Object
    - 作用：父组件传递子组件直接显示使用（父组件传递数据给子组件 父 --> 子）
    - 注意：子组件不应该直接修改数据，应该通过调用父组件的方法来修改